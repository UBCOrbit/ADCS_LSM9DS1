\hypertarget{system_8c}{}\section{generated\+\_\+launchpad/source/system.c File Reference}
\label{system_8c}\index{generated\+\_\+launchpad/source/system.\+c@{generated\+\_\+launchpad/source/system.\+c}}


System Driver Source File.  


{\ttfamily \#include \char`\"{}system.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sys\+\_\+selftest.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sys\+\_\+pcr.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}pinmux.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{system_8c_a45f46deb7644048176d5e9347afb939a}{setup\+P\+LL}} (void)
\item 
void \mbox{\hyperlink{system_8c_aaa231cc5e90591363431c63f15360567}{trim\+L\+PO}} (void)
\item 
void \mbox{\hyperlink{system_8c_a4490b16ad7d041537868dc9732b3dac2}{setup\+Flash}} (void)
\item 
void \mbox{\hyperlink{system_8c_a57d84f612fd0d9fec4cd8ac58b5d10c3}{periph\+Init}} (void)
\item 
void \mbox{\hyperlink{system_8c_aa26c333cac9e8481986232eb8f0d9244}{map\+Clocks}} (void)
\item 
void \mbox{\hyperlink{system_8c_ab11a117f1e08391f23d1da05930e7acf}{system\+Init}} (void)
\begin{DoxyCompactList}\small\item\em Initializes System Driver. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{system_8c_af970bbab0b866f007e84e236cb1654e9}\label{system_8c_af970bbab0b866f007e84e236cb1654e9}} 
void {\bfseries system\+Power\+Down} (uint32 mode)
\item 
void \mbox{\hyperlink{system_8c_ab3c7742b0b313a8ac595a0ae677c3ccc}{system\+Get\+Config\+Value}} (\mbox{\hyperlink{structsystem__config__reg}{system\+\_\+config\+\_\+reg\+\_\+t}} $\ast$config\+\_\+reg, \mbox{\hyperlink{sys__common_8h_a9daf9a5992391b058477d28d107ee5e2}{config\+\_\+value\+\_\+type\+\_\+t}} type)
\begin{DoxyCompactList}\small\item\em Get the initial or current values of the configuration registers. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{system_8c_afa983f739f63d48487aec38706af5a6f}{tcmflash\+Get\+Config\+Value}} (\mbox{\hyperlink{structtcmflash__config__reg}{tcmflash\+\_\+config\+\_\+reg\+\_\+t}} $\ast$config\+\_\+reg, \mbox{\hyperlink{sys__common_8h_a9daf9a5992391b058477d28d107ee5e2}{config\+\_\+value\+\_\+type\+\_\+t}} type)
\begin{DoxyCompactList}\small\item\em Get the initial or current values of the configuration registers. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{system_8c_ac61ec208839bdc4fec42ea50268b4db3}{sram\+Get\+Config\+Value}} (\mbox{\hyperlink{structsram__config__reg}{sram\+\_\+config\+\_\+reg\+\_\+t}} $\ast$config\+\_\+reg, \mbox{\hyperlink{sys__common_8h_a9daf9a5992391b058477d28d107ee5e2}{config\+\_\+value\+\_\+type\+\_\+t}} type)
\begin{DoxyCompactList}\small\item\em Get the initial or current values of the configuration registers. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
System Driver Source File. 

\begin{DoxyDate}{Date}
07-\/\+July-\/2017 
\end{DoxyDate}
\begin{DoxyVersion}{Version}
04.\+07.\+00
\end{DoxyVersion}
This file contains\+:
\begin{DoxyItemize}
\item A\+PI Functions
\end{DoxyItemize}which are relevant for the System driver. 

\subsection{Function Documentation}
\mbox{\Hypertarget{system_8c_aa26c333cac9e8481986232eb8f0d9244}\label{system_8c_aa26c333cac9e8481986232eb8f0d9244}} 
\index{system.\+c@{system.\+c}!map\+Clocks@{map\+Clocks}}
\index{map\+Clocks@{map\+Clocks}!system.\+c@{system.\+c}}
\subsubsection{\texorpdfstring{map\+Clocks()}{mapClocks()}}
{\footnotesize\ttfamily void map\+Clocks (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

{\bfseries Initialize} {\bfseries Clock} {\bfseries Tree\+:} ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline

\begin{DoxyItemize}
\item Disable / Enable clock domain ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline

\item Wait for until clocks are locked ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline

\item Map device clock domains to desired sources and configure top-\/level dividers ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline

\item All clock domains are working off the default clock sources until now ~\newline
~\newline
~\newline
~\newline
~\newline

\item The below assignments can be easily modified using the H\+A\+L\+Co\+Gen G\+UI ~\newline
~\newline
~\newline
~\newline

\item Setup G\+C\+LK, H\+C\+LK and V\+C\+LK clock source for normal operation, power down mode and after wakeup ~\newline
~\newline
~\newline

\item Setup R\+T\+I\+C\+L\+K1 and R\+T\+I\+C\+L\+K2 clocks ~\newline
~\newline

\item Setup asynchronous peripheral clock sources for A\+V\+C\+L\+K1 and A\+V\+C\+L\+K2 ~\newline

\item Setup synchronous peripheral clock dividers for V\+C\+L\+K1, V\+C\+L\+K2, V\+C\+L\+K3 
\end{DoxyItemize}

Definition at line 241 of file system.\+c.



References system\+R\+E\+G1.


\begin{DoxyCode}
242 \{
243     uint32 SYS\_CSVSTAT, SYS\_CSDIS;
244 
245 \textcolor{comment}{/* USER CODE BEGIN (11) */}
246 \textcolor{comment}{/* USER CODE END */}
247 
250     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CDDIS = (uint32)((uint32)0U << 4U ) \textcolor{comment}{/* AVCLK1 , 1 - OFF, 0 - ON */}
251                       | (uint32)((uint32)0U << 5U ) \textcolor{comment}{/* AVCLK2 , 1 - OFF, 0 - ON */}
252                       | (uint32)((uint32)0U << 8U ) \textcolor{comment}{/* VCLK3 , 1 - OFF, 0 - ON */}
253                       | (uint32)((uint32)0U << 9U ) \textcolor{comment}{/* VCLK4 , 1 - OFF, 0 - ON */}
254                       | (uint32)((uint32)1U << 10U) \textcolor{comment}{/* AVCLK3 , 1 - OFF, 0 - ON */}
255                       | (uint32)((uint32)0U << 11U); \textcolor{comment}{/* AVCLK4 , 1 - OFF, 0 - ON */}
256 
257 
258     \textcolor{comment}{/* Work Around for Errata SYS#46:}
259 \textcolor{comment}{     *}
260 \textcolor{comment}{     * Errata Description:}
261 \textcolor{comment}{     *            Clock Source Switching Not Qualified with Clock Source Enable And Clock Source Valid}
262 \textcolor{comment}{     * Workaround:}
263 \textcolor{comment}{     *            Always check the CSDIS register to make sure the clock source is turned on and check}
264 \textcolor{comment}{     * the CSVSTAT register to make sure the clock source is valid. Then write to GHVSRC to switch the
       clock.}
265 \textcolor{comment}{     */}
267     SYS\_CSVSTAT = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CSVSTAT;
268     SYS\_CSDIS = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CSDIS;
269     \textcolor{keywordflow}{while} ((SYS\_CSVSTAT & ((SYS\_CSDIS ^ 0xFFU) & 0xFFU)) != ((SYS\_CSDIS ^ 0xFFU) & 0xFFU))
270     \{
271         SYS\_CSVSTAT = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CSVSTAT;
272         SYS\_CSDIS = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CSDIS;
273     \} \textcolor{comment}{/* Wait */}
274 
275 \textcolor{comment}{/* USER CODE BEGIN (12) */}
276 \textcolor{comment}{/* USER CODE END */}
277 
281 
283     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->GHVSRC = (uint32)((uint32)\mbox{\hyperlink{system_8h_a3a0d64b1ad18cdebaada564d5e443166ada755f70c500bf43d169a22b4ecef801}{SYS\_OSC}} << 24U)
284                        | (uint32)((uint32)\mbox{\hyperlink{system_8h_a3a0d64b1ad18cdebaada564d5e443166ada755f70c500bf43d169a22b4ecef801}{SYS\_OSC}} << 16U)
285                        | (uint32)((uint32)\mbox{\hyperlink{system_8h_a3a0d64b1ad18cdebaada564d5e443166a0e28ad7e3d2b547ef5daeea864149430}{SYS\_PLL1}} << 0U);
286 
288     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->RCLKSRC = (uint32)((uint32)1U << 24U)
289                         | (uint32)((uint32)\mbox{\hyperlink{system_8h_a3a0d64b1ad18cdebaada564d5e443166a37da1df194eef5a2287322e22eb37c27}{SYS\_VCLK}} << 16U)
290                         | (uint32)((uint32)1U << 8U)
291                         | (uint32)((uint32)\mbox{\hyperlink{system_8h_a3a0d64b1ad18cdebaada564d5e443166a37da1df194eef5a2287322e22eb37c27}{SYS\_VCLK}} << 0U);
292 
294     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->VCLKASRC = (uint32)((uint32)\mbox{\hyperlink{system_8h_a3a0d64b1ad18cdebaada564d5e443166a37da1df194eef5a2287322e22eb37c27}{SYS\_VCLK}} << 8U)
295                          | (uint32)((uint32)\mbox{\hyperlink{system_8h_a3a0d64b1ad18cdebaada564d5e443166a37da1df194eef5a2287322e22eb37c27}{SYS\_VCLK}} << 0U);
296 
298     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CLKCNTL  = (\mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CLKCNTL & 0xF0FFFFFFU)
299                          | (uint32)((uint32)1U << 24U);
300     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CLKCNTL  = (\mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CLKCNTL & 0xFFF0FFFFU)
301                          | (uint32)((uint32)1U << 16U);
302 
303     \mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->CLK2CNTL = (\mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->CLK2CNTL & 0xFFFFF0F0U)
304                          | (uint32)((uint32)1U << 8U)
305                          | (uint32)((uint32)1U << 0U);
306 
307     \mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->VCLKACON1 =  (uint32)((uint32)(1U - 1U) << 24U)
308                            | (uint32)((uint32)0U << 20U)
309                            | (uint32)((uint32)\mbox{\hyperlink{system_8h_a3a0d64b1ad18cdebaada564d5e443166a37da1df194eef5a2287322e22eb37c27}{SYS\_VCLK}} << 16U)
310                            | (uint32)((uint32)(1U - 1U) << 8U)
311                            | (uint32)((uint32)0U << 4U)
312                            | (uint32)((uint32)\mbox{\hyperlink{system_8h_a3a0d64b1ad18cdebaada564d5e443166a37da1df194eef5a2287322e22eb37c27}{SYS\_VCLK}} << 0U);
313 
314 \textcolor{comment}{/* USER CODE BEGIN (13) */}
315 \textcolor{comment}{/* USER CODE END */}
316 
317     \textcolor{comment}{/* Now the PLLs are locked and the PLL outputs can be sped up */}
318     \textcolor{comment}{/* The R-divider was programmed to be 0xF. Now this divider is changed to programmed value */}
319     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->PLLCTL1 = (\mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->PLLCTL1 & 0xE0FFFFFFU) | (uint32)((uint32)(1U - 
      1U) << 24U);
320     \textcolor{comment}{/*SAFETYMCUSW 134 S MR:12.2 <APPROVED> "LDRA Tool issue" */}
321     \mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->PLLCTL3 = (\mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->PLLCTL3 & 0xE0FFFFFFU) | (uint32)((uint32)(1U - 
      1U) << 24U);
322 
323     \textcolor{comment}{/* Enable/Disable Frequency modulation */}
324     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->PLLCTL2 |= 0x00000000U;
325 
326 \textcolor{comment}{/* USER CODE BEGIN (14) */}
327 \textcolor{comment}{/* USER CODE END */}
328 
329 \}
\end{DoxyCode}
\mbox{\Hypertarget{system_8c_a57d84f612fd0d9fec4cd8ac58b5d10c3}\label{system_8c_a57d84f612fd0d9fec4cd8ac58b5d10c3}} 
\index{system.\+c@{system.\+c}!periph\+Init@{periph\+Init}}
\index{periph\+Init@{periph\+Init}!system.\+c@{system.\+c}}
\subsubsection{\texorpdfstring{periph\+Init()}{periphInit()}}
{\footnotesize\ttfamily void periph\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}


\begin{DoxyItemize}
\item Disable Peripherals before peripheral powerup
\item Release peripherals from reset and enable clocks to all peripherals ~\newline
~\newline

\item Power-\/up all peripherals ~\newline

\item Enable Peripherals 
\end{DoxyItemize}

Definition at line 214 of file system.\+c.



References pcr\+R\+EG, and system\+R\+E\+G1.



Referenced by system\+Init().


\begin{DoxyCode}
215 \{
216 
217 \textcolor{comment}{/* USER CODE BEGIN (9) */}
218 \textcolor{comment}{/* USER CODE END */}
219 
221     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CLKCNTL &= 0xFFFFFEFFU;
222 
225     \mbox{\hyperlink{reg__pcr_8h_a3b6e651755dc3ae113426bea72cdf332}{pcrREG}}->PSPWRDWNCLR0 = 0xFFFFFFFFU;
226     \mbox{\hyperlink{reg__pcr_8h_a3b6e651755dc3ae113426bea72cdf332}{pcrREG}}->PSPWRDWNCLR1 = 0xFFFFFFFFU;
227     \mbox{\hyperlink{reg__pcr_8h_a3b6e651755dc3ae113426bea72cdf332}{pcrREG}}->PSPWRDWNCLR2 = 0xFFFFFFFFU;
228     \mbox{\hyperlink{reg__pcr_8h_a3b6e651755dc3ae113426bea72cdf332}{pcrREG}}->PSPWRDWNCLR3 = 0xFFFFFFFFU;
229 
231     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CLKCNTL |= 0x00000100U;
232 
233 \textcolor{comment}{/* USER CODE BEGIN (10) */}
234 \textcolor{comment}{/* USER CODE END */}
235 
236 \}
\end{DoxyCode}
\mbox{\Hypertarget{system_8c_a4490b16ad7d041537868dc9732b3dac2}\label{system_8c_a4490b16ad7d041537868dc9732b3dac2}} 
\index{system.\+c@{system.\+c}!setup\+Flash@{setup\+Flash}}
\index{setup\+Flash@{setup\+Flash}!system.\+c@{system.\+c}}
\subsubsection{\texorpdfstring{setup\+Flash()}{setupFlash()}}
{\footnotesize\ttfamily void setup\+Flash (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}


\begin{DoxyItemize}
\item Setup flash read mode, address wait states and data wait states ~\newline
~\newline
~\newline

\item Setup flash access wait states for bank 7 ~\newline
~\newline

\item Disable write access to flash state machine registers ~\newline

\item Setup flash bank power modes 
\end{DoxyItemize}

Definition at line 177 of file system.\+c.



References flash\+W\+R\+EG.


\begin{DoxyCode}
178 \{
179 
180 \textcolor{comment}{/* USER CODE BEGIN (6) */}
181 \textcolor{comment}{/* USER CODE END */}
182 
184     \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FRDCNTL =  0x00000000U
185                        | (uint32)((uint32)3U << 8U)
186                        | (uint32)((uint32)1U << 4U)
187                        |  1U;
188 
190     FSM\_WR\_ENA\_HL    = 0x5U;
191     EEPROM\_CONFIG\_HL = 0x00000002U
192                      | (uint32)((uint32)3U << 16U) ;
193 
194 \textcolor{comment}{/* USER CODE BEGIN (7) */}
195 \textcolor{comment}{/* USER CODE END */}
196 
198     FSM\_WR\_ENA\_HL    = 0xAU;
199 
201     \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FBFALLBACK = 0x00000000U
202                           | (uint32)((uint32)\mbox{\hyperlink{system_8h_a3b352eed98abd9349057ec14d23ad332a093a300506cc138fbc459a4e18976dc3}{SYS\_ACTIVE}} << 14U) \textcolor{comment}{/* BANK 7 */}
203                           | (uint32)((uint32)\mbox{\hyperlink{system_8h_a3b352eed98abd9349057ec14d23ad332a093a300506cc138fbc459a4e18976dc3}{SYS\_ACTIVE}} << 2U)  \textcolor{comment}{/* BANK 1 */}
204                           | (uint32)((uint32)\mbox{\hyperlink{system_8h_a3b352eed98abd9349057ec14d23ad332a093a300506cc138fbc459a4e18976dc3}{SYS\_ACTIVE}} << 0U); \textcolor{comment}{/* BANK 0 */}
205 
206 \textcolor{comment}{/* USER CODE BEGIN (8) */}
207 \textcolor{comment}{/* USER CODE END */}
208 
209 \}
\end{DoxyCode}
\mbox{\Hypertarget{system_8c_a45f46deb7644048176d5e9347afb939a}\label{system_8c_a45f46deb7644048176d5e9347afb939a}} 
\index{system.\+c@{system.\+c}!setup\+P\+LL@{setup\+P\+LL}}
\index{setup\+P\+LL@{setup\+P\+LL}!system.\+c@{system.\+c}}
\subsubsection{\texorpdfstring{setup\+P\+L\+L()}{setupPLL()}}
{\footnotesize\ttfamily void setup\+P\+LL (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}


\begin{DoxyItemize}
\item Configure P\+LL control registers ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
 {\bfseries Initialize} {\bfseries Pll1\+:} ~\newline
~\newline
~\newline
~\newline
~\newline

\item Setup pll control register 1\+:
\item Setup reset on oscillator slip
\item Setup bypass on pll slip
\item setup Pll output clock divider to max before Lock
\item Setup reset on oscillator fail
\item Setup reference clock divider
\item Setup Pll multiplier
\item Setup pll control register 2
\item Setup spreading rate
\item Setup bandwidth adjustment
\item Setup internal Pll output divider
\item Setup spreading amount
\end{DoxyItemize}

{\bfseries Initialize} {\bfseries Pll2\+:} ~\newline
~\newline

\begin{DoxyItemize}
\item Setup pll2 control register \+:
\item setup Pll output clock divider to max before Lock
\item Setup reference clock divider
\item Setup internal Pll output divider
\item Setup Pll multiplier
\item Enable P\+L\+L(s) to start up or Lock 
\end{DoxyItemize}

Definition at line 74 of file system.\+c.



References system\+R\+E\+G1.



Referenced by system\+Init().


\begin{DoxyCode}
75 \{
76 
77 \textcolor{comment}{/* USER CODE BEGIN (3) */}
78 \textcolor{comment}{/* USER CODE END */}
79 
80     \textcolor{comment}{/* Disable PLL1 and PLL2 */}
81     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CSDISSET = 0x00000002U | 0x00000040U;
82     \textcolor{comment}{/*SAFETYMCUSW 28 D MR:NA <APPROVED> "Hardware status bit read check" */}
83     \textcolor{keywordflow}{while}((\mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CSDIS & 0x42U) != 0x42U)
84     \{
85     \textcolor{comment}{/* Wait */}
86     \}
87 
88     \textcolor{comment}{/* Clear Global Status Register */}
89     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->GBLSTAT = 0x301U;
90 
93 
102     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->PLLCTL1 =  (uint32)0x00000000U
103                         |  (uint32)0x20000000U
104                         |  (uint32)((uint32)0x1FU << 24U)
105                         |  (uint32)0x00000000U
106                         |  (uint32)((uint32)(6U - 1U)<< 16U)
107                         |  (uint32)(0x7700U);
108 
115     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->PLLCTL2 =  (uint32)((uint32)255U << 22U)
116                         |  (uint32)((uint32)7U << 12U)
117                         |  (uint32)((uint32)(2U - 1U) << 9U)
118                         |  (uint32)61U;
119 
121 
128     \mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->PLLCTL3 = (uint32)((uint32)(2U - 1U) << 29U)
129                         | (uint32)((uint32)0x1FU << 24U)
130                         | (uint32)((uint32)(6U - 1U)<< 16U)
131                         | (uint32)(0x7700U);
132 
134     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CSDIS = 0x00000000U
135                       | 0x00000000U
136                       | 0x00000008U
137                       | 0x00000080U
138                       | 0x00000000U
139                       | 0x00000000U
140                       | 0x00000000U;
141 \}
\end{DoxyCode}
\mbox{\Hypertarget{system_8c_ac61ec208839bdc4fec42ea50268b4db3}\label{system_8c_ac61ec208839bdc4fec42ea50268b4db3}} 
\index{system.\+c@{system.\+c}!sram\+Get\+Config\+Value@{sram\+Get\+Config\+Value}}
\index{sram\+Get\+Config\+Value@{sram\+Get\+Config\+Value}!system.\+c@{system.\+c}}
\subsubsection{\texorpdfstring{sram\+Get\+Config\+Value()}{sramGetConfigValue()}}
{\footnotesize\ttfamily void sram\+Get\+Config\+Value (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsram__config__reg}{sram\+\_\+config\+\_\+reg\+\_\+t}} $\ast$}]{config\+\_\+reg,  }\item[{\mbox{\hyperlink{sys__common_8h_a9daf9a5992391b058477d28d107ee5e2}{config\+\_\+value\+\_\+type\+\_\+t}}}]{type }\end{DoxyParamCaption})}



Get the initial or current values of the configuration registers. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$config\+\_\+reg} & pointer to the struct to which the initial or current value of the configuration registers need to be stored \\
\hline
\mbox{\tt in}  & {\em type} & whether initial or current value of the configuration registers need to be stored
\begin{DoxyItemize}
\item Initial\+Value\+: initial value of the configuration registers will be stored in the struct pointed by config\+\_\+reg
\item Current\+Value\+: initial value of the configuration registers will be stored in the struct pointed by config\+\_\+reg
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
This function will copy the initial or current value (depending on the parameter \textquotesingle{}type\textquotesingle{}) of the configuration registers to the struct pointed by config\+\_\+reg 

Definition at line 647 of file system.\+c.


\begin{DoxyCode}
648 \{
649     \textcolor{keywordflow}{if} (type == InitialValue)
650     \{
651         config\_reg->CONFIG\_RAMCTRL[0U] = SRAM\_RAMCTRL\_CONFIGVALUE;
652         config\_reg->CONFIG\_RAMTHRESHOLD[0U] = SRAM\_RAMTHRESHOLD\_CONFIGVALUE;
653         config\_reg->CONFIG\_RAMINTCTRL[0U] = SRAM\_RAMINTCTRL\_CONFIGVALUE;
654         config\_reg->CONFIG\_RAMTEST[0U] = SRAM\_RAMTEST\_CONFIGVALUE;
655         config\_reg->CONFIG\_RAMADDRDECVECT[0U] = SRAM\_RAMADDRDECVECT\_CONFIGVALUE;
656 
657         config\_reg->CONFIG\_RAMCTRL[1U] = SRAM\_RAMCTRL\_CONFIGVALUE;
658         config\_reg->CONFIG\_RAMTHRESHOLD[1U] = SRAM\_RAMTHRESHOLD\_CONFIGVALUE;
659         config\_reg->CONFIG\_RAMINTCTRL[1U] = SRAM\_RAMINTCTRL\_CONFIGVALUE;
660         config\_reg->CONFIG\_RAMTEST[1U] = SRAM\_RAMTEST\_CONFIGVALUE;
661         config\_reg->CONFIG\_RAMADDRDECVECT[1U] = SRAM\_RAMADDRDECVECT\_CONFIGVALUE;
662     \}
663     \textcolor{keywordflow}{else}
664     \{
665     \textcolor{comment}{/*SAFETYMCUSW 134 S MR:12.2 <APPROVED> "LDRA Tool issue" */}
666         config\_reg->CONFIG\_RAMCTRL[0U] = tcram1REG->RAMCTRL;
667         config\_reg->CONFIG\_RAMTHRESHOLD[0U] = tcram1REG->RAMTHRESHOLD;
668         config\_reg->CONFIG\_RAMINTCTRL[0U] = tcram1REG->RAMINTCTRL;
669         config\_reg->CONFIG\_RAMTEST[0U] = tcram1REG->RAMTEST;
670         config\_reg->CONFIG\_RAMADDRDECVECT[0U] = tcram1REG->RAMADDRDECVECT;
671 
672         \textcolor{comment}{/*SAFETYMCUSW 134 S MR:12.2 <APPROVED> "LDRA Tool issue" */}
673         config\_reg->CONFIG\_RAMCTRL[1U] = tcram2REG->RAMCTRL;
674         config\_reg->CONFIG\_RAMTHRESHOLD[1U] = tcram2REG->RAMTHRESHOLD;
675         config\_reg->CONFIG\_RAMINTCTRL[1U] = tcram2REG->RAMINTCTRL;
676         config\_reg->CONFIG\_RAMTEST[1U] = tcram2REG->RAMTEST;
677         config\_reg->CONFIG\_RAMADDRDECVECT[1U] = tcram2REG->RAMADDRDECVECT;
678     \}
679 \}
\end{DoxyCode}
\mbox{\Hypertarget{system_8c_ab3c7742b0b313a8ac595a0ae677c3ccc}\label{system_8c_ab3c7742b0b313a8ac595a0ae677c3ccc}} 
\index{system.\+c@{system.\+c}!system\+Get\+Config\+Value@{system\+Get\+Config\+Value}}
\index{system\+Get\+Config\+Value@{system\+Get\+Config\+Value}!system.\+c@{system.\+c}}
\subsubsection{\texorpdfstring{system\+Get\+Config\+Value()}{systemGetConfigValue()}}
{\footnotesize\ttfamily void system\+Get\+Config\+Value (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsystem__config__reg}{system\+\_\+config\+\_\+reg\+\_\+t}} $\ast$}]{config\+\_\+reg,  }\item[{\mbox{\hyperlink{sys__common_8h_a9daf9a5992391b058477d28d107ee5e2}{config\+\_\+value\+\_\+type\+\_\+t}}}]{type }\end{DoxyParamCaption})}



Get the initial or current values of the configuration registers. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$config\+\_\+reg} & pointer to the struct to which the initial or current value of the configuration registers need to be stored \\
\hline
\mbox{\tt in}  & {\em type} & whether initial or current value of the configuration registers need to be stored
\begin{DoxyItemize}
\item Initial\+Value\+: initial value of the configuration registers will be stored in the struct pointed by config\+\_\+reg
\item Current\+Value\+: initial value of the configuration registers will be stored in the struct pointed by config\+\_\+reg
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
This function will copy the initial or current value (depending on the parameter \textquotesingle{}type\textquotesingle{}) of the configuration registers to the struct pointed by config\+\_\+reg 

Definition at line 488 of file system.\+c.


\begin{DoxyCode}
489 \{
490     \textcolor{keywordflow}{if} (type == InitialValue)
491     \{
492         config\_reg->CONFIG\_SYSPC1 = SYS\_SYSPC1\_CONFIGVALUE;
493         config\_reg->CONFIG\_SYSPC2 = SYS\_SYSPC2\_CONFIGVALUE;
494         config\_reg->CONFIG\_SYSPC7 = SYS\_SYSPC7\_CONFIGVALUE;
495         config\_reg->CONFIG\_SYSPC8 = SYS\_SYSPC8\_CONFIGVALUE;
496         config\_reg->CONFIG\_SYSPC9 = SYS\_SYSPC9\_CONFIGVALUE;
497         config\_reg->CONFIG\_CSDIS = SYS\_CSDIS\_CONFIGVALUE;
498         config\_reg->CONFIG\_CDDIS = SYS\_CDDIS\_CONFIGVALUE;
499         config\_reg->CONFIG\_GHVSRC = SYS\_GHVSRC\_CONFIGVALUE;
500         config\_reg->CONFIG\_VCLKASRC = SYS\_VCLKASRC\_CONFIGVALUE;
501         config\_reg->CONFIG\_RCLKSRC = SYS\_RCLKSRC\_CONFIGVALUE;
502         config\_reg->CONFIG\_MSTGCR = SYS\_MSTGCR\_CONFIGVALUE;
503         config\_reg->CONFIG\_MINITGCR = SYS\_MINITGCR\_CONFIGVALUE;
504         config\_reg->CONFIG\_MSINENA = SYS\_MSINENA\_CONFIGVALUE;
505         config\_reg->CONFIG\_PLLCTL1 = SYS\_PLLCTL1\_CONFIGVALUE\_2;
506         config\_reg->CONFIG\_PLLCTL2 = SYS\_PLLCTL2\_CONFIGVALUE;
507         config\_reg->CONFIG\_UERFLAG = SYS\_UERFLAG\_CONFIGVALUE;
508         \textcolor{comment}{/*SAFETYMCUSW 139 S MR:13.7 <APPROVED> "Hardware status bit read check" */}
509         \textcolor{keywordflow}{if}(LPO\_TRIM\_VALUE != 0xFFFFU)
510         \{
511             config\_reg->CONFIG\_LPOMONCTL = SYS\_LPOMONCTL\_CONFIGVALUE\_1;
512         \}
513         \textcolor{keywordflow}{else}
514         \{
515             config\_reg->CONFIG\_LPOMONCTL = SYS\_LPOMONCTL\_CONFIGVALUE\_2;
516         \}
517         config\_reg->CONFIG\_CLKTEST = SYS\_CLKTEST\_CONFIGVALUE;
518         config\_reg->CONFIG\_DFTCTRLREG1 = SYS\_DFTCTRLREG1\_CONFIGVALUE;
519         config\_reg->CONFIG\_DFTCTRLREG2 = SYS\_DFTCTRLREG2\_CONFIGVALUE;
520         config\_reg->CONFIG\_GPREG1 = SYS\_GPREG1\_CONFIGVALUE;
521         config\_reg->CONFIG\_RAMGCR = SYS\_RAMGCR\_CONFIGVALUE;
522         config\_reg->CONFIG\_BMMCR1 = SYS\_BMMCR1\_CONFIGVALUE;
523         config\_reg->CONFIG\_MMUGCR = SYS\_MMUGCR\_CONFIGVALUE;
524         config\_reg->CONFIG\_CLKCNTL = SYS\_CLKCNTL\_CONFIGVALUE;
525         config\_reg->CONFIG\_ECPCNTL = SYS\_ECPCNTL\_CONFIGVALUE;
526         config\_reg->CONFIG\_DEVCR1 = SYS\_DEVCR1\_CONFIGVALUE;
527         config\_reg->CONFIG\_SYSECR = SYS\_SYSECR\_CONFIGVALUE;
528 
529         config\_reg->CONFIG\_PLLCTL3 = SYS2\_PLLCTL3\_CONFIGVALUE\_2;
530         config\_reg->CONFIG\_STCCLKDIV = SYS2\_STCCLKDIV\_CONFIGVALUE;
531         config\_reg->CONFIG\_CLK2CNTL = SYS2\_CLK2CNTL\_CONFIGVALUE;
532         config\_reg->CONFIG\_VCLKACON1 = SYS2\_VCLKACON1\_CONFIGVALUE;
533         config\_reg->CONFIG\_CLKSLIP = SYS2\_CLKSLIP\_CONFIGVALUE;
534         config\_reg->CONFIG\_EFC\_CTLEN = SYS2\_EFC\_CTLEN\_CONFIGVALUE;
535     \}
536     \textcolor{keywordflow}{else}
537     \{
538     \textcolor{comment}{/*SAFETYMCUSW 134 S MR:12.2 <APPROVED> "LDRA Tool issue" */}
539         config\_reg->CONFIG\_SYSPC1 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC1;
540         config\_reg->CONFIG\_SYSPC2 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC2;
541         config\_reg->CONFIG\_SYSPC7 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC7;
542         config\_reg->CONFIG\_SYSPC8 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC8;
543         config\_reg->CONFIG\_SYSPC9 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC9;
544         config\_reg->CONFIG\_CSDIS = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CSDIS;
545         config\_reg->CONFIG\_CDDIS = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CDDIS;
546         config\_reg->CONFIG\_GHVSRC = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->GHVSRC;
547         config\_reg->CONFIG\_VCLKASRC = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->VCLKASRC;
548         config\_reg->CONFIG\_RCLKSRC = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->RCLKSRC;
549         config\_reg->CONFIG\_MSTGCR = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->MSTGCR;
550         config\_reg->CONFIG\_MINITGCR = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->MINITGCR;
551         config\_reg->CONFIG\_MSINENA = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->MSINENA;
552         config\_reg->CONFIG\_PLLCTL1 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->PLLCTL1;
553         config\_reg->CONFIG\_PLLCTL2 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->PLLCTL2;
554         config\_reg->CONFIG\_UERFLAG = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC10;
555         config\_reg->CONFIG\_LPOMONCTL = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->LPOMONCTL;
556         config\_reg->CONFIG\_CLKTEST = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CLKTEST;
557         config\_reg->CONFIG\_DFTCTRLREG1 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->DFTCTRLREG1;
558         config\_reg->CONFIG\_DFTCTRLREG2 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->DFTCTRLREG2;
559         config\_reg->CONFIG\_GPREG1 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->GPREG1;
560         config\_reg->CONFIG\_RAMGCR = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->RAMGCR;
561         config\_reg->CONFIG\_BMMCR1 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->BMMCR1;
562         config\_reg->CONFIG\_MMUGCR = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CPURSTCR;
563         config\_reg->CONFIG\_CLKCNTL = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->CLKCNTL;
564         config\_reg->CONFIG\_ECPCNTL = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->ECPCNTL;
565         config\_reg->CONFIG\_DEVCR1 = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->DEVCR1;
566         config\_reg->CONFIG\_SYSECR = \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSECR;
567 
568         \textcolor{comment}{/*SAFETYMCUSW 134 S MR:12.2 <APPROVED> "LDRA Tool issue" */}
569         config\_reg->CONFIG\_PLLCTL3 = \mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->PLLCTL3;
570         config\_reg->CONFIG\_STCCLKDIV = \mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->STCCLKDIV;
571         config\_reg->CONFIG\_CLK2CNTL = \mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->CLK2CNTL;
572         config\_reg->CONFIG\_VCLKACON1 = \mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->VCLKACON1;
573         config\_reg->CONFIG\_CLKSLIP = \mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->CLKSLIP;
574         config\_reg->CONFIG\_EFC\_CTLEN = \mbox{\hyperlink{reg__system_8h_aa7b03254a6e13afea4c05b2fe8b2186b}{systemREG2}}->EFC\_CTLEN;
575     \}
576 \}
\end{DoxyCode}
\mbox{\Hypertarget{system_8c_ab11a117f1e08391f23d1da05930e7acf}\label{system_8c_ab11a117f1e08391f23d1da05930e7acf}} 
\index{system.\+c@{system.\+c}!system\+Init@{system\+Init}}
\index{system\+Init@{system\+Init}!system.\+c@{system.\+c}}
\subsubsection{\texorpdfstring{system\+Init()}{systemInit()}}
{\footnotesize\ttfamily void system\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Initializes System Driver. 

This function initializes the System driver. 
\begin{DoxyItemize}
\item Set up flash address and data wait states based on the target C\+PU clock frequency The number of address and data wait states for the target C\+PU clock frequency are specified in the specific part\textquotesingle{}s datasheet.
\end{DoxyItemize}

Configure the L\+PO such that HF L\+PO is as close to 10\+M\+Hz as possible ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline

\begin{DoxyItemize}
\item Wait for P\+L\+Ls to start up and map clock domains to desired clock sources ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline

\item set E\+C\+LK pins functional mode ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline

\item set E\+C\+LK pins default output value ~\newline
~\newline
~\newline
~\newline
~\newline

\item set E\+C\+LK pins output direction ~\newline
~\newline
~\newline
~\newline

\item set E\+C\+LK pins open drain enable ~\newline
~\newline
~\newline

\item set E\+C\+LK pins pullup/pulldown enable ~\newline
~\newline

\item set E\+C\+LK pins pullup/pulldown select ~\newline

\item Setup E\+C\+LK 
\end{DoxyItemize}

Definition at line 334 of file system.\+c.



References checkefc\+Self\+Test(), efc\+Check(), F\+A\+L\+SE, mux\+Init(), periph\+Init(), selftest\+Fail\+Notification(), and setup\+P\+L\+L().


\begin{DoxyCode}
335 \{
336     uint32 efcCheckStatus;
337 
338 \textcolor{comment}{/* USER CODE BEGIN (15) */}
339 \textcolor{comment}{/* USER CODE END */}
340 
341     \textcolor{comment}{/* Configure PLL control registers and enable PLLs.}
342 \textcolor{comment}{     * The PLL takes (127 + 1024 * NR) oscillator cycles to acquire lock.}
343 \textcolor{comment}{     * This initialization sequence performs all the tasks that are not}
344 \textcolor{comment}{     * required to be done at full application speed while the PLL locks.}
345 \textcolor{comment}{     */}
346     \mbox{\hyperlink{system_8c_a45f46deb7644048176d5e9347afb939a}{setupPLL}}();
347 
348 \textcolor{comment}{/* USER CODE BEGIN (16) */}
349 \textcolor{comment}{/* USER CODE END */}
350 
351     \textcolor{comment}{/* Run eFuse controller start-up checks and start eFuse controller ECC self-test.}
352 \textcolor{comment}{     * This includes a check for the eFuse controller error outputs to be stuck-at-zero.}
353 \textcolor{comment}{     */}
354     efcCheckStatus = \mbox{\hyperlink{sys__selftest_8h_a646eb27315f3ce47edde97c563389f76}{efcCheck}}();
355 
356 \textcolor{comment}{/* USER CODE BEGIN (17) */}
357 \textcolor{comment}{/* USER CODE END */}
358 
359     \textcolor{comment}{/* Enable clocks to peripherals and release peripheral reset */}
360     \mbox{\hyperlink{system_8c_a57d84f612fd0d9fec4cd8ac58b5d10c3}{periphInit}}();
361 
362 \textcolor{comment}{/* USER CODE BEGIN (18) */}
363 \textcolor{comment}{/* USER CODE END */}
364 
365     \textcolor{comment}{/* Configure device-level multiplexing and I/O multiplexing */}
366     \mbox{\hyperlink{group__IOMM_ga8fac89d371c9be80b507da3c31144423}{muxInit}}();
367 
368 \textcolor{comment}{/* USER CODE BEGIN (19) */}
369 \textcolor{comment}{/* USER CODE END */}
370 
371     \textcolor{keywordflow}{if}(efcCheckStatus == 0U)
372     \{
373         \textcolor{comment}{/* Wait for eFuse controller self-test to complete and check results */}
374         \textcolor{keywordflow}{if} (\mbox{\hyperlink{sys__selftest_8h_ad44409ae54516ba10303dd5c011f4fa6}{checkefcSelfTest}}() == \mbox{\hyperlink{hal__stdtypes_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}})                            \textcolor{comment}{/* eFuse
       controller ECC logic self-test failed */}
375         \{
376             \mbox{\hyperlink{sys__selftest_8h_ae96e990763ae7d45bd55ea5a27299a47}{selftestFailNotification}}(EFCCHECK\_FAIL1);           \textcolor{comment}{/* device operation
       is not reliable */}
377         \}
378     \}
379     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(efcCheckStatus == 2U)
380     \{
381         \textcolor{comment}{/* Wait for eFuse controller self-test to complete and check results */}
382         \textcolor{keywordflow}{if} (\mbox{\hyperlink{sys__selftest_8h_ad44409ae54516ba10303dd5c011f4fa6}{checkefcSelfTest}}() == \mbox{\hyperlink{hal__stdtypes_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}})                            \textcolor{comment}{/* eFuse
       controller ECC logic self-test failed */}
383         \{
384             \mbox{\hyperlink{sys__selftest_8h_ae96e990763ae7d45bd55ea5a27299a47}{selftestFailNotification}}(EFCCHECK\_FAIL1);           \textcolor{comment}{/* device operation
       is not reliable */}
385         \}
386         \textcolor{keywordflow}{else}
387         \{
388             \mbox{\hyperlink{sys__selftest_8h_ae96e990763ae7d45bd55ea5a27299a47}{selftestFailNotification}}(EFCCHECK\_FAIL2);
389         \}
390     \}
391     \textcolor{keywordflow}{else}
392     \{
393     \textcolor{comment}{/* Empty */}
394     \}
395 \textcolor{comment}{/* USER CODE BEGIN (20) */}
396 \textcolor{comment}{/* USER CODE END */}
397 
402     \mbox{\hyperlink{system_8c_a4490b16ad7d041537868dc9732b3dac2}{setupFlash}}();
403 
404 \textcolor{comment}{/* USER CODE BEGIN (21) */}
405 \textcolor{comment}{/* USER CODE END */}
406 
408     \mbox{\hyperlink{system_8c_aaa231cc5e90591363431c63f15360567}{trimLPO}}();
409 
410 
411 
412 \textcolor{comment}{/* USER CODE BEGIN (23) */}
413 \textcolor{comment}{/* USER CODE END */}
414 
416     \mbox{\hyperlink{system_8c_aa26c333cac9e8481986232eb8f0d9244}{mapClocks}}();
417 
418 \textcolor{comment}{/* USER CODE BEGIN (24) */}
419 \textcolor{comment}{/* USER CODE END */}
420 
422     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC1 = 0U;
423 
425     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC4 = 0U;
426 
428     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC2 = 1U;
429 
431     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC7 = 0U;
432 
434     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC8 = 0U;
435 
437     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->SYSPC9 = 1U;
438 
440     \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->ECPCNTL = (uint32)((uint32)0U << 24U)
441                         | (uint32)((uint32)0U << 23U)
442                         | (uint32)((uint32)(8U - 1U) & 0xFFFFU);
443 
444 \textcolor{comment}{/* USER CODE BEGIN (25) */}
445 \textcolor{comment}{/* USER CODE END */}
446 \}
\end{DoxyCode}
\mbox{\Hypertarget{system_8c_afa983f739f63d48487aec38706af5a6f}\label{system_8c_afa983f739f63d48487aec38706af5a6f}} 
\index{system.\+c@{system.\+c}!tcmflash\+Get\+Config\+Value@{tcmflash\+Get\+Config\+Value}}
\index{tcmflash\+Get\+Config\+Value@{tcmflash\+Get\+Config\+Value}!system.\+c@{system.\+c}}
\subsubsection{\texorpdfstring{tcmflash\+Get\+Config\+Value()}{tcmflashGetConfigValue()}}
{\footnotesize\ttfamily void tcmflash\+Get\+Config\+Value (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtcmflash__config__reg}{tcmflash\+\_\+config\+\_\+reg\+\_\+t}} $\ast$}]{config\+\_\+reg,  }\item[{\mbox{\hyperlink{sys__common_8h_a9daf9a5992391b058477d28d107ee5e2}{config\+\_\+value\+\_\+type\+\_\+t}}}]{type }\end{DoxyParamCaption})}



Get the initial or current values of the configuration registers. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$config\+\_\+reg} & pointer to the struct to which the initial or current value of the configuration registers need to be stored \\
\hline
\mbox{\tt in}  & {\em type} & whether initial or current value of the configuration registers need to be stored
\begin{DoxyItemize}
\item Initial\+Value\+: initial value of the configuration registers will be stored in the struct pointed by config\+\_\+reg
\item Current\+Value\+: initial value of the configuration registers will be stored in the struct pointed by config\+\_\+reg
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
This function will copy the initial or current value (depending on the parameter \textquotesingle{}type\textquotesingle{}) of the configuration registers to the struct pointed by config\+\_\+reg 

Definition at line 592 of file system.\+c.


\begin{DoxyCode}
593 \{
594     \textcolor{keywordflow}{if} (type == InitialValue)
595     \{
596         config\_reg->CONFIG\_FRDCNTL = TCMFLASH\_FRDCNTL\_CONFIGVALUE;
597         config\_reg->CONFIG\_FEDACCTRL1 = TCMFLASH\_FEDACCTRL1\_CONFIGVALUE;
598         config\_reg->CONFIG\_FEDACCTRL2 = TCMFLASH\_FEDACCTRL2\_CONFIGVALUE;
599         config\_reg->CONFIG\_FEDACSDIS = TCMFLASH\_FEDACSDIS\_CONFIGVALUE;
600         config\_reg->CONFIG\_FBPROT = TCMFLASH\_FBPROT\_CONFIGVALUE;
601         config\_reg->CONFIG\_FBSE = TCMFLASH\_FBSE\_CONFIGVALUE;
602         config\_reg->CONFIG\_FBAC = TCMFLASH\_FBAC\_CONFIGVALUE;
603         config\_reg->CONFIG\_FBFALLBACK = TCMFLASH\_FBFALLBACK\_CONFIGVALUE;
604         config\_reg->CONFIG\_FPAC1 = TCMFLASH\_FPAC1\_CONFIGVALUE;
605         config\_reg->CONFIG\_FPAC2 = TCMFLASH\_FPAC2\_CONFIGVALUE;
606         config\_reg->CONFIG\_FMAC = TCMFLASH\_FMAC\_CONFIGVALUE;
607         config\_reg->CONFIG\_FLOCK = TCMFLASH\_FLOCK\_CONFIGVALUE;
608         config\_reg->CONFIG\_FDIAGCTRL = TCMFLASH\_FDIAGCTRL\_CONFIGVALUE;
609         config\_reg->CONFIG\_FEDACSDIS2 = TCMFLASH\_FEDACSDIS2\_CONFIGVALUE;
610     \}
611     \textcolor{keywordflow}{else}
612     \{
613     \textcolor{comment}{/*SAFETYMCUSW 134 S MR:12.2 <APPROVED> "LDRA Tool issue" */}
614         config\_reg->CONFIG\_FRDCNTL = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FRDCNTL;
615         config\_reg->CONFIG\_FEDACCTRL1 = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FEDACCTRL1;
616         config\_reg->CONFIG\_FEDACCTRL2 = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FEDACCTRL2;
617         config\_reg->CONFIG\_FEDACSDIS = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FEDACSDIS;
618         config\_reg->CONFIG\_FBPROT = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FBPROT;
619         config\_reg->CONFIG\_FBSE = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FBSE;
620         config\_reg->CONFIG\_FBAC = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FBAC;
621         config\_reg->CONFIG\_FBFALLBACK = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FBFALLBACK;
622         config\_reg->CONFIG\_FPAC1 = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FPAC1;
623         config\_reg->CONFIG\_FPAC2 = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FPAC2;
624         config\_reg->CONFIG\_FMAC = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FMAC;
625         config\_reg->CONFIG\_FLOCK = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FLOCK;
626         config\_reg->CONFIG\_FDIAGCTRL = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FDIAGCTRL;
627         config\_reg->CONFIG\_FEDACSDIS2 = \mbox{\hyperlink{reg__flash_8h_ab65d4f98d84397753c538ff9053582a8}{flashWREG}}->FEDACSDIS2;
628     \}
629 \}
\end{DoxyCode}
\mbox{\Hypertarget{system_8c_aaa231cc5e90591363431c63f15360567}\label{system_8c_aaa231cc5e90591363431c63f15360567}} 
\index{system.\+c@{system.\+c}!trim\+L\+PO@{trim\+L\+PO}}
\index{trim\+L\+PO@{trim\+L\+PO}!system.\+c@{system.\+c}}
\subsubsection{\texorpdfstring{trim\+L\+P\+O()}{trimLPO()}}
{\footnotesize\ttfamily void trim\+L\+PO (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

{\bfseries Initialize} Lpo\+: ~\newline
 Load T\+R\+IM values from O\+TP if present else load user defined values 

Definition at line 146 of file system.\+c.


\begin{DoxyCode}
147 \{
148 
149 \textcolor{comment}{/* USER CODE BEGIN (4) */}
150 \textcolor{comment}{/* USER CODE END */}
151 
154     \textcolor{comment}{/*SAFETYMCUSW 139 S MR:13.7 <APPROVED> "Hardware status bit read check" */}
155     \textcolor{keywordflow}{if}(LPO\_TRIM\_VALUE != 0xFFFFU)
156     \{
157 
158         \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->LPOMONCTL  = (uint32)((uint32)1U << 24U)
159                                 | LPO\_TRIM\_VALUE;
160     \}
161     \textcolor{keywordflow}{else}
162     \{
163 
164         \mbox{\hyperlink{reg__system_8h_a8c52b62df956810205e4da7a2fd74efa}{systemREG1}}->LPOMONCTL   =  (uint32)((uint32)1U << 24U)
165                                  | (uint32)((uint32)16U << 8U)
166                                  | 16U;
167     \}
168 
169 \textcolor{comment}{/* USER CODE BEGIN (5) */}
170 \textcolor{comment}{/* USER CODE END */}
171 
172 \}
\end{DoxyCode}
